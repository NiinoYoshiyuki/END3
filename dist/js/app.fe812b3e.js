(function(){"use strict";var e={8377:function(e,n,t){var o=t(5130),a=t(6768),r=t(6450),l=t(1051);function i(e,n,t,o,i,u){const c=(0,a.g2)("Main"),s=(0,a.g2)("app-alert");return(0,a.uX)(),(0,a.Wv)(r.E,null,{default:(0,a.k6)((()=>[(0,a.bF)(l.Y,null,{default:(0,a.k6)((()=>[(0,a.bF)(c),(0,a.bF)(s)])),_:1})])),_:1})}var u=t(4232),c=t(7810),s=t(5540);const d={class:"container"},f={class:"top_panel"},v={class:"top_left_panel"},p={class:"goal_limit_panel",style:{margin:"10px"}},b={class:"middle_buttons"},m={class:"runner_panel"},k={class:"runner_panel_left"},_={class:"runner_headline"},h={class:"runner_name"},g={class:"runner_delete"},w={class:"runner_times_container"},y={class:"runner_times_no"},C={class:"runner_times_info"},D={class:"runner_times_delete"},L={class:"runner_panel_right"},R={class:"footer_buttons"};function T(e,n,t,r,l,i){return(0,a.uX)(),(0,a.CE)("div",d,[n[14]||(n[14]=(0,a.Lk)("div",{class:"top_title"},[(0,a.Lk)("div",null,"BLUETOOTH STOPWATCH")],-1)),(0,a.Lk)("div",f,[(0,a.Lk)("div",v,[(0,a.Lk)("div",null,(0,u.v_)(i.currentTime),1)])]),(0,a.Lk)("div",p,[n[3]||(n[3]=(0,a.Lk)("label",null,"ゴール回数設定：",-1)),(0,a.bF)(s.W,{modelValue:r.goalLimit,"onUpdate:modelValue":n[0]||(n[0]=e=>r.goalLimit=e),modelModifiers:{number:!0},type:"number",min:"1",max:"100",style:{"max-width":"100px"},"hide-details":""},null,8,["modelValue"])]),(0,a.Lk)("div",b,[(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerStart,disabled:"initial"!==r.timerStatus},{default:(0,a.k6)((()=>n[4]||(n[4]=[(0,a.eW)("START")]))),_:1},8,["onClick","disabled"]),(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerStop,disabled:"start"!==r.timerStatus&&"lap1"!==r.timerStatus&&"lap2"!==r.timerStatus},{default:(0,a.k6)((()=>n[5]||(n[5]=[(0,a.eW)("STOP")]))),_:1},8,["onClick","disabled"]),(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerReset,disabled:"stop"!==r.timerStatus},{default:(0,a.k6)((()=>n[6]||(n[6]=[(0,a.eW)("RESET")]))),_:1},8,["onClick","disabled"])]),(0,a.Lk)("div",m,[(0,a.Lk)("div",k,[(0,a.Lk)("div",_,[(0,a.Lk)("div",h,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>r.currentRunner.name=e),onChange:n[2]||(n[2]=(...e)=>r.onChangeRunnerName&&r.onChangeRunnerName(...e))},null,544),[[o.Jo,r.currentRunner.name]])]),(0,a.Lk)("div",g,[(0,a.bF)(c.D,{color:"red",onClick:r.onDeleteRunner},{default:(0,a.k6)((()=>n[7]||(n[7]=[(0,a.eW)("DELETE")]))),_:1},8,["onClick"])])]),(0,a.Lk)("div",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.currentRunner.data,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"runner_times",key:t},[(0,a.Lk)("div",y," [ "+(0,u.v_)(r.currentRunner.data.length-t)+" ] ",1),(0,a.Lk)("div",C,[(0,a.Lk)("div",null,(0,u.v_)(e.time),1)]),(0,a.Lk)("div",D,[(0,a.bF)(c.D,{color:"red",size:"x-small",onClick:()=>r.onDeleteRunnerTime(t)},{default:(0,a.k6)((()=>n[8]||(n[8]=[(0,a.Lk)("span",{style:{"font-size":"10px"}},"DELETE",-1)]))),_:2},1032,["onClick"])])])))),128))])]),(0,a.Lk)("div",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.runnerList,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.number},[(0,a.bF)(c.D,{class:(0,u.C4)({"active-runner":r.currentRunner===e}),onClick:n=>r.onSelectRunner(e)},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,u.v_)(e.name),1)])),_:2},1032,["class","onClick"])])))),128)),(0,a.Lk)("div",null,[(0,a.bF)(c.D,{color:"red",onClick:r.onAddRunner},{default:(0,a.k6)((()=>n[9]||(n[9]=[(0,a.eW)("ADD")]))),_:1},8,["onClick"])])])]),(0,a.Lk)("div",R,[(0,a.bo)((0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onRequestDevice},{default:(0,a.k6)((()=>n[10]||(n[10]=[(0,a.eW)("BLUETOOTH ON")]))),_:1},8,["onClick"]),[[o.aG,"disconnected"===r.bleStatus]]),(0,a.bo)((0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onDisconnect},{default:(0,a.k6)((()=>n[11]||(n[11]=[(0,a.eW)("BLUETOOTH OFF")]))),_:1},8,["onClick"]),[[o.aG,"connected"===r.bleStatus]]),(0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onClearData},{default:(0,a.k6)((()=>n[12]||(n[12]=[(0,a.eW)("CLEAR")]))),_:1},8,["onClick"]),(0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onDownloadData},{default:(0,a.k6)((()=>n[13]||(n[13]=[(0,a.eW)("DOWNLOAD")]))),_:1},8,["onClick"])])])}t(4114),t(6573),t(8100),t(7936),t(8111),t(2489),t(1701),t(8237),t(7467),t(4732),t(9577),t(4603),t(7566),t(8721);var O=t(144);const S={class:"app_alert__background"},F={class:"app_alert__container"},U={class:"app_alert__message"},A={class:"app_alert__buttons"};function E(e,n,t,r,l,i){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("div",F,[(0,a.Lk)("div",U,(0,u.v_)(r.store.alertMessage),1),(0,a.Lk)("div",A,[(0,a.bo)((0,a.bF)(c.D,{onClick:r.close,color:"#ccc"},{default:(0,a.k6)((()=>n[0]||(n[0]=[(0,a.eW)("閉じる")]))),_:1},8,["onClick"]),[[o.aG,"close"===r.store.alertType]]),(0,a.bo)((0,a.bF)(c.D,{onClick:r.yes,color:"#ccc"},{default:(0,a.k6)((()=>n[1]||(n[1]=[(0,a.eW)("はい")]))),_:1},8,["onClick"]),[[o.aG,"yes_no"===r.store.alertType]]),(0,a.bo)((0,a.bF)(c.D,{onClick:r.no,color:"#ccc"},{default:(0,a.k6)((()=>n[2]||(n[2]=[(0,a.eW)("いいえ")]))),_:1},8,["onClick"]),[[o.aG,"yes_no"===r.store.alertType]])])])],512)),[[o.aG,r.store.isShowAlert]])}const x=(0,O.KR)({isShowAlert:!1,alertMessage:"",alertType:""}),j={resolve:void 0,reject:void 0};var I={setup(){return{store:x,close(){x.value.isShowAlert=!1,j.resolve&&j.resolve()},yes(){x.value.isShowAlert=!1,j.resolve&&j.resolve()},no(){x.value.isShowAlert=!1,j.reject&&j.reject()}}},show(e,n){return x.value.isShowAlert=!0,x.value.alertMessage=e,x.value.alertType=n,new Promise(((e,n)=>{j.resolve=e,j.reject=n}))}},K=t(1241);const W=(0,K.A)(I,[["render",E]]);var N=W;const P=new BlueJelly;var G={name:"MainVue",setup(){const e=(0,O.KR)(""),n=(0,O.KR)("disconnected"),t=(0,O.KR)("initial"),o=(0,O.KR)(0),a=(0,O.KR)(0),r=(0,O.KR)(0),l=(0,O.KR)(""),i=(0,O.KR)(""),u=(0,O.KR)([]),c=(0,O.KR)(null),s=(0,O.KR)(0),d=(0,O.KR)(20),f=(0,O.KR)(!1);P.setUUID("UUID1","1b24e5c4-a39c-4d46-92fb-3bbcb2f34a41","9d18d524-2a6e-44ce-8724-445575b23e9a"),P.onRead=function(n,t){if("UUID1"===t){const t=new TextDecoder("utf-8"),o=t.decode(n);e.value=o;const a=JSON.parse(o);(8&a.tr)>0&&(console.log("GOAL_TRG"),_())}},P.onScan=function(){P.connectGATT("UUID1")},P.onConnectGATT=function(e){"UUID1"===e&&(n.value="connected",P.startNotify("UUID1"))},P.onDisconnect=function(){n.value="disconnected",e.value=""};let v,p=0;function b(){if(!v){const e=Date.now();t.value="start";const n=p;v=setInterval((()=>{const t=n+Date.now()-e;o.value=t,p=t}),10),l.value=(new Date).toLocaleString()}}function m(){v&&(clearInterval(v),v=void 0,i.value=(new Date).toLocaleString(),t.value="stop",c.value.data.unshift(g(o.value,null,null,l.value,i.value)),console.log(c),L())}function k(){m(),o.value=0,a.value=0,r.value=0,p=0,l.value="",i.value="",t.value="initial",s.value=0,f.value=!1}function _(){"initial"!==t.value&&f.value||(s.value++,1===s.value&&b(),s.value>=d.value&&(m(),f.value=!0))}function h(e){return{number:e,name:`Runner${e}`,data:[]}}function g(e,n,t,o,a){return{time:(e/1e3).toFixed(2),lap1:n?(n/1e3).toFixed(2):"",lap2:t?(t/1e3).toFixed(2):"",startTimestamp:o,goalTimestamp:a}}function w(){const e=h(1);u.value=[e],c.value=e,L()}function y(){u.value.map((e=>{e.data=[]})),L()}function C(){const e="download.csv",n=u.value.map((e=>e.data.reduce(((e,n)=>(n.lap1&&(e.push(n.lap1),n.lap2&&e.push(n.lap2)),e.push(n.time),e)),[e.name]).join(","))).join("\n"),t=new Uint8Array([239,187,191]),o=new Blob([t,n],{type:"text/csv"});if(navigator.share){const n=new File([o],e,{type:"text/csv"});navigator.share({files:[n]}).then((()=>{console.log("共有成功.")})).catch((e=>{console.log(e)}))}else{const n=(window.URL||window.webkitURL).createObjectURL(o),t=document.createElement("a");t.href=n,t.download=e,t.click(),(window.URL||window.webkitURL).revokeObjectURL(n)}}function D(){const e=JSON.parse(localStorage.getItem("runner"));return!!(e&&e.length>0)&&(u.value=e,c.value=e[0],!0)}function L(){localStorage.setItem("runner",JSON.stringify(u.value))}return D()||w(),{readData:e,bleStatus:n,timerStatus:t,timer:o,lap1:a,lap2:r,start:l,goal:i,runnerList:u,currentRunner:c,goalLimit:d,onRequestDevice(){P.requestDevice("UUID1")},onConnect(){P.connectGATT("UUID1")},onRead(){P.read("UUID1")},onDisconnect(){P.disconnect()},onTimerStart(){b()},onTimerStop(){m()},onTimerReset(){k()},onAddRunner(){u.value.push(h(u.value.length+1)),L()},onSelectRunner(e){c.value=e,"stop"===t.value&&k()},async onDeleteRunner(){try{await N.show("削除します。よろしいですか？","yes_no")}catch(n){return}const e=u.value.findIndex((e=>e===c.value));e<0||(u.value=u.value.filter((e=>e!==c.value)),0===u.value.length?w():u.value.length===e?(c.value=u.value[e-1],L()):(c.value=u.value[e],L()))},onChangeRunnerName(){L()},onDeleteRunnerTime(e){c.value.data.splice(e,1),L()},async onClearData(){try{await N.show("クリアします。よろしいですか？","yes_no"),y(),k()}catch(e){}},onDownloadData(){C()}}},computed:{currentTime:function(){return(this.timer/1e3).toFixed(2)},lap1Time:function(){return(this.lap1/1e3).toFixed(2)},lap2Time:function(){return(this.lap2/1e3).toFixed(2)}}};const M=(0,K.A)(G,[["render",T],["__scopeId","data-v-0b0ab2f8"]]);var X=M,B={name:"App",components:{Main:X,AppAlert:N},data:()=>({})};const J=(0,K.A)(B,[["render",i]]);var V=J,q=(t(5524),t(1480)),H=(0,q.$N)();async function z(){const e=await t.e(53).then(t.t.bind(t,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}z(),(0,o.Ef)(V).use(H).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,r){if(!o){var l=1/0;for(s=0;s<e.length;s++){o=e[s][0],a=e[s][1],r=e[s][2];for(var i=!0,u=0;u<o.length;u++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(i=!1,r<l&&(l=r));if(i){e.splice(s--,1);var c=a();void 0!==c&&(n=c)}}return n}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[o,a,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);t.r(r);var l={};e=e||[null,n({}),n([]),n(n)];for(var i=2&a&&o;"object"==typeof i&&!~e.indexOf(i);i=n(i))Object.getOwnPropertyNames(i).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},t.d(r,l),r}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,o){return t.f[o](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/webfontloader.56569530.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="ble-stop-watch:";t.l=function(o,a,r,l){if(e[o])e[o].push(a);else{var i,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var d=c[s];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==n+r){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",n+r),i.src=o),e[o]=[a];var f=function(n,t){i.onerror=i.onload=null,clearTimeout(v);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(t)})),n)return n(t)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={524:0};t.f.j=function(n,o){var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(t,o){a=e[n]=[t,o]}));o.push(a[2]=r);var l=t.p+t.u(n),i=new Error,u=function(o){if(t.o(e,n)&&(a=e[n],0!==a&&(e[n]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;i.message="Loading chunk "+n+" failed.\n("+r+": "+l+")",i.name="ChunkLoadError",i.type=r,i.request=l,a[1](i)}};t.l(l,u,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,r,l=o[0],i=o[1],u=o[2],c=0;if(l.some((function(n){return 0!==e[n]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(u)var s=u(t)}for(n&&n(o);c<l.length;c++)r=l[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(s)},o=self["webpackChunkble_stop_watch"]=self["webpackChunkble_stop_watch"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8377)}));o=t.O(o)})();
//# sourceMappingURL=app.fe812b3e.js.map